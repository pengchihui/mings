<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<body>
		
		<ul>
			<li>asdasd</li>
			<li>dfgdfg</li>
			<li>ghjghj</li>
		</ul>
		<button>刷新</button>
		
		<script>
			
			//ajax  异步的js和xml  （不要单独的文件去打开运行）
			
			var btn=document.querySelector("button")
			var ul=document.querySelector("ul")
//			btn.onclick=function(){
//				//第一步：打开浏览器
//				var xhr=new XMLHttpRequest();
//				//第二步：输入地址（请求方式，目标地址，是否异步处理）
//				xhr.open("get","xml.xml",true)
//				//第四步：等待反馈
//				xhr.onload=function(){
//					var dom=this.responseXML//拿到请求到的xml数据，结果是节点类型
//					var arr=dom.getElementsByTagName("name");
//					console.log(arr);
//					ul.innerHTML=""
//					for(var i=0;i<arr.length;i++){
//						ul.innerHTML+="<li>"+arr[i].innerHTML+"</li>"
//					}					
//				}
//				//第三步：发送请求
//				xhr.send();				
//			}


//-------------------------------------------------
			var num=0;
			btn.onclick=function(){
				var xhr=new XMLHttpRequest();
				xhr.open("get","json.txt",true);
				xhr.onload=function(){
					var str=this.responseText;
					var arr=JSON.parse(str);
					console.log(arr)
					ul.innerHTML=""
					for(var i=num;i<num+3;i++){
						ul.innerHTML+="<li>"+arr[i].name+"</li>";
					}
					num=num+3
				}
				xhr.send()
			}




				var xhr=new XMLHttpRequest();
				//console.log(xhr.readyState)
				xhr.open("get","json.txt",true);
				//console.log(xhr.readyState)
				//一键处理
				//xhr.onload=function(){}
				
				//分步处理
				xhr.onreadystatechange=function(){
//					console.log(this.status)//HTTP服务器状态码
//					console.log(this.readyState)
					if(this.status==404&&this.readyState==4){
						console.log("路径有问题请修改")
					}else if(this.status==500&&this.readyState==4){
						console.log("服务器正在维修，请稍后再试")
					}
				}
				xhr.send()
				
//readyState状态码				
//0: 请求未初始化
//1: 服务器连接已建立
//2: 请求已接收
//3: 请求处理中
//4: 请求已完成，且响应已就绪

//status状态码
//200  成功
//404  未找到
//500  服务器错误
			
			
		</script>
		
	</body>
</html>
