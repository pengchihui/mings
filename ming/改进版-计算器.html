<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>

		<style>
			.all {
				width: 300px;
				height: 400px;
				margin: 0 auto;
			}
			
			#screen {
				width: 296px;
				height: 30px;
				border: 1px solid navajowhite;
				text-align: right;
				font-size: 20px;
				background: Lavender;
				padding-right: 2px;
			}
			
			#suanpan {
				width: 300px;
				height: 360px;
				padding: 20px;
				background: Beige;
			}
			
			tr {
				width: 300px;
			}
			
			td {
				text-align: center;
				background: GhostWhite;
				cursor: pointer;
			}
		</style>
	</head>
	<div class="all">
		<input id="screen" type="text" maxlength="10" value="0" onfocus="this.blur();" />
		<table id="suanpan" cellspacing="1">
			<tr class="graybgc">
				<td style="color:#FF4500" onclick="clearscreen()">AC</td>
				<td style="color:#FF4500" onclick="del();">←</td>
				<td onclick="persent()">%</td>
				<td class="bgcg" onclick="divide()">÷</td>
			</tr>
			<tr>
				<td onclick="jisuan(7);">7</td>
				<td onclick="jisuan(8);">8</td>
				<td onclick="jisuan(9);">9</td>
				<td class="bgcg" onclick="times()">×</td>
			</tr>
			<tr>
				<td onclick="jisuan(4);">4</td>
				<td onclick="jisuan(5);">5</td>
				<td onclick="jisuan(6);">6</td>
				<td class="bgcg" onclick="minus()">-</td>
			</tr>
			<tr>
				<td onclick="jisuan(1);">1</td>
				<td onclick="jisuan(2);">2</td>
				<td onclick="jisuan(3);">3</td>
				<td class="bgcg" onclick="plus()">+</td>
			</tr>
			<tr>
				<td onclick="jisuan(0);">0</td>
				<td onclick="dzero()">00</td>
				<td onclick="dot()">.</td>
				<td class="bgcg" onclick="equal()">=</td>
			</tr>
		</table>

	</div>
	<script>
		var num = 0,
			numshow = 0,
			result = 0;
		var operate = 0; //判断输入状态的标志 0,1 0为可以连续输入状态 1为重新输入状态
		var calcul = 0; //判断计算加减乘除除余
		var calculator = document.getElementById('screen'); //显示
		/*box显示*/
		function jisuan(num) {
			var str = String(calculator.value);
			str = (str != 0) ? (operate == 0 ? str : "") : ""; //数字不为0
			str = str + String(num);
			calculator.value = str;
			operate = 0; //连续状态
		}
		/*计算函数 */
		function calculate() {
			numshow = Number(calculator.value); //当前box中显示的值
			if(num != 0) {
				switch(calcul) {
					case 1:
						result = num + numshow;
						console.log(num)
						break;
					case 2:
						result = num - numshow;
						break;
					case 3:
						result = num * numshow;
						break;
					case 4:
						result = num / numshow;
						break;
					case 5:
						result = num % numshow;
						break;
				}
			} else {
				result = numshow; //零的化等于零
			}
			numshow=result;
			calculator.value=numshow;
			num=result;//存储当前的值
		}

		function plus() { //加法 
			calculate(); //调用计算函数 
			operate = 1; //更改输入状态 
			calcul = 1; //更改计算操作
		}

		function equal() {
			calculate(); //等于 
			operate = 1;
			num = 0; //初始化
			result = 0; //初始化
			numshow = "0"; //初始化
		}
			function minus() { //减法 
				calculate();
				operate = 1;
				calcul = 2;
			}

			function times() { //乘法 
				calculate();
				operate = 1;
				calcul = 3;
			}

			function divide() { //除法 
				calculate();
				operate = 1;
				calcul = 4;
			}

			function persent() { //求余 
				calculate();
				operate = 1;
				calcul = 5;
			}

			function equal() {
				calculate(); //等于 
				operate = 1;
				num = 0; //初始化
				result = 0; //初始化
				numshow = "0"; //初始化
			}
			function del() { //退格 
				var str = String(calculator.value);
				str = (str != "0") ? str : "";
				str = str.substr(0, str.length - 1);
				str = (str != "") ? str : "0";
				calculator.value = str;
			}

			function clearscreen() { //清除数据 
				num = 0;
				result = 0;
				numshow = "0";
				calculator.value = "0";
			}

			function dot() {
				var str = String(calculator.value);
				str = (str != "0") ? ((operate == 0) ? str : "0") : "0"; //如果当前值不是"0"，且状态为0，则返回当前值，否则返回"0"; 
				for(i = 0; i <= str.length; i++) { //判断是否已经有一个点号 
					if(str.substr(i, 1) == ".") return false; //如果有则不再插入 
				}
				str = str + ".";
				calculator[0].value = str;
				operate = 0;
			}

			function dzero() {
				var str = String(calculator.value);
				str = (str != "0") ? ((operate == 0) ? str : "0") : "0"; //如果当前值不是"0"，且状态为0，则返回当前值，否则返回"0"; 
				str = str + "00";
				calculator.value = str;
				operate = 0;
			}
	</script>

	</body>

</html>